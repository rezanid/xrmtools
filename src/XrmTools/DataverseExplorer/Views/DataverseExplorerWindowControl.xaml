<UserControl x:Class="XrmTools.DataverseExplorer.Views.DataverseExplorerWindowControl"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:theming="clr-namespace:Microsoft.VisualStudio.PlatformUI;assembly=Microsoft.VisualStudio.Imaging"
             xmlns:p="clr-namespace:Microsoft.VisualStudio.PlatformUI;assembly=Microsoft.VisualStudio.Shell.15.0"
             xmlns:pi="clr-namespace:Microsoft.Internal.VisualStudio.PlatformUI;assembly=Microsoft.VisualStudio.Shell.15.0"
             xmlns:vsui="clr-namespace:Microsoft.VisualStudio.Shell;assembly=Microsoft.VisualStudio.Shell.15.0"
             xmlns:toolkit="clr-namespace:Community.VisualStudio.Toolkit;assembly=Community.VisualStudio.Toolkit"
             xmlns:catalog="clr-namespace:Microsoft.VisualStudio.Imaging;assembly=Microsoft.VisualStudio.ImageCatalog"
             xmlns:imaging="clr-namespace:Microsoft.VisualStudio.Imaging;assembly=Microsoft.VisualStudio.Imaging"
             xmlns:local="clr-namespace:XrmTools.DataverseExplorer.Views"
             xmlns:models="clr-namespace:XrmTools.DataverseExplorer.Models"
             xmlns:ctrls="clr-namespace:XrmTools.Shell.Controls"
             mc:Ignorable="d"
             xmlns:i="http://schemas.microsoft.com/xaml/behaviors"
             UseLayoutRounding="True"
             d:DesignHeight="450" d:DesignWidth="800"
             Background="{DynamicResource {x:Static p:ThemedDialogColors.WindowPanelBrushKey}}"
             Foreground="{DynamicResource {x:Static p:ThemedDialogColors.WindowPanelTextBrushKey}}">
             <!--toolkit:Themes.UseVsTheme="True" -->
    <UserControl.Resources>
    </UserControl.Resources>
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <!-- Toolbar -->
        <!--<StackPanel Grid.Row="0" Orientation="Horizontal" Margin="4,4,4,4" Height="32">
            <Button Command="{Binding RefreshCommand}"
              ToolTip="Refresh"
              Padding="6,2,6,2"
              Margin="0,0,4,0">
                <TextBlock Text="??" FontSize="14"/>
            </Button>

            <Button Command="{Binding CollapseAllCommand}"
              ToolTip="Collapse All"
              Padding="6,2,6,2"
              Margin="0,0,4,0">
                <TextBlock Text="?" FontSize="14"/>
            </Button>

            <Separator Width="1" Margin="2,0,2,0"
                 Background="Gray"/>

            --><!-- Search ComboBox with magnifying glass placeholder --><!--
            <ComboBox Width="200" Margin="4,0,0,0" VerticalAlignment="Center" IsEditable="True" Text="{Binding SearchText, UpdateSourceTrigger=PropertyChanged}">
                <ComboBoxItem>Search by name...</ComboBoxItem>
                <ComboBoxItem>Search by description...</ComboBoxItem>
                <Separator Margin="0,4,0,4"/>
                <ComboBoxItem>All properties</ComboBoxItem>
            </ComboBox>
        </StackPanel>-->

        <!--<ctrls:ScrollBar Grid.Row="0" Orientation="Horizontal" Height="16" Margin="2,2,2,2" Value="10" Minimum="0" Maximum="100"/>-->
        <ctrls:TreeView Grid.Row="1" ItemsSource="{Binding RootNodes}"
                        ctrls:TreeViewItem.Expanded="TreeViewItem_Expanded">
            <ctrls:TreeView.ItemTemplate>
                <HierarchicalDataTemplate ItemsSource="{Binding Children}" DataType="{x:Type models:ExplorerNodeBase}">
                    <StackPanel Orientation="Horizontal" Margin="2">
                        <!--<imaging:CrispImage Margin="1" Width="16" Height="16" Moniker="{x:Static catalog:KnownMonikers.Assembly}" />-->
                        <imaging:CrispImage Margin="1" Width="16" Height="16" Moniker="{Binding ImageMoniker}" />
                        <TextBlock Text="{Binding DisplayName}" Foreground="{DynamicResource {x:Static p:TreeViewColors.BackgroundTextBrushKey}}"/>
                    </StackPanel>
                </HierarchicalDataTemplate>
            </ctrls:TreeView.ItemTemplate>
        </ctrls:TreeView>


        <!-- Loading Indicator Overlay -->
        <!--<Grid Grid.Row="1" Background="Black" Opacity="0.3" 
              Visibility="{Binding IsLoading, Converter={StaticResource BooleanToVisibilityConverter}}">
            <StackPanel VerticalAlignment="Center" HorizontalAlignment="Center">
                <TextBlock Text="Loading..." HorizontalAlignment="Center" Foreground="White"/>
            </StackPanel>
        </Grid>-->
    </Grid>
</UserControl>
